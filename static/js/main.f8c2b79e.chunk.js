(this["webpackJsonpmemer-web"]=this["webpackJsonpmemer-web"]||[]).push([[0],{13:function(e,t,a){e.exports={Feed__wrapper:"Feed_Feed__wrapper__3pJVq",Feed__addPost:"Feed_Feed__addPost__hrmPp",Feed__caption_image:"Feed_Feed__caption_image__3SSb4",Feed__import_button:"Feed_Feed__import_button__29ee6","file-upload":"Feed_file-upload__3OSem",Feed__postButton:"Feed_Feed__postButton__dTE4M",Feed__posted:"Feed_Feed__posted__PdLIU",Feed__post_head:"Feed_Feed__post_head__3-6JW",Feed__post_head_username:"Feed_Feed__post_head_username__BPEtG",Feed__progress:"Feed_Feed__progress__1r0Uk",Feed__post_date:"Feed_Feed__post_date__2CuIq",Feed__posted_caption:"Feed_Feed__posted_caption__2nl1m",Feed__posted_picture:"Feed_Feed__posted_picture__27RfC",Feed__posted_like_comment:"Feed_Feed__posted_like_comment__L3Nii",Feed__posted_likes:"Feed_Feed__posted_likes__2eetJ",Feed__posted_liked:"Feed_Feed__posted_liked__oUyww",Feed__posted_notLike:"Feed_Feed__posted_notLike__1bD74",Feed__posted_comment:"Feed_Feed__posted_comment__29kVf"}},24:function(e,t,a){e.exports={Profile__wrapper:"Profile_Profile__wrapper__2yhl_",Profile__container:"Profile_Profile__container__1CdnE",Profile__header:"Profile_Profile__header__2RSjG",Profile__picture:"Profile_Profile__picture__2K51p",Profile__data:"Profile_Profile__data__s9jEM",Profile__name:"Profile_Profile__name__qGkaI",Profile__bio:"Profile_Profile__bio__WE-ns",Profile__likes:"Profile_Profile__likes__3Bdm5"}},28:function(e,t,a){e.exports={header:"Header_header__2GuBm",header__logo:"Header_header__logo__1NdrO",header__button:"Header_header__button__1phFf",Header__sigin:"Header_Header__sigin__2ROVx",Profile_picture:"Header_Profile_picture__1-9Ig"}},65:function(e,t,a){},66:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(19),o=a.n(c),r=(a(65),a(10)),i=(a(66),a.p+"static/media/default_profile.064ad453.png"),l=a(24),d=a.n(l),_=a(4),u=function(e){var t=e.userInfo,a=(e.user,Object(s.useContext)(E)),n=Object(r.a)(a,1)[0];return Object(_.jsxs)("div",{className:d.a.Profile__wrapper,children:[Object(_.jsxs)("div",{className:d.a.Profile__container,children:[Object(_.jsx)("div",{className:d.a.Profile__header}),Object(_.jsx)("img",{className:d.a.Profile__picture,src:t?t.profilePicture:i,alt:"profile_picture"}),Object(_.jsxs)("div",{className:d.a.Profile__data,children:[Object(_.jsx)("p",{className:d.a.Profile__name,children:t.displayName}),Object(_.jsx)("p",{className:d.a.Profile__bio,children:t.biography})]})]}),Object(_.jsxs)("div",{className:d.a.Profile__likes,children:[Object(_.jsx)("p",{style:{margin:"5px",fontSize:"18px",color:"#222222"},children:"Likes"}),Object(_.jsx)("p",{style:{margin:"5px",fontSize:"16px",color:"gray"},children:n})]})]})},p=a(13),j=a.n(p),f=a(105),b=a(107),m=a(31),h=m.a.initializeApp({apiKey:"AIzaSyBiQTZS1fb7n5xNd1kKS-PSuGGk01snbPw",authDomain:"memer-app-db5f8.firebaseapp.com",projectId:"memer-app-db5f8",storageBucket:"memer-app-db5f8.appspot.com",messagingSenderId:"540830499376",appId:"1:540830499376:web:303391a8a6102d1f1463f5",measurementId:"G-65MM1MSFZ0"}).firestore(),O=m.a.auth(),g=m.a.storage(),x=a(56),F=a.n(x),P=a(37),v=(a(71),function(e){var t=e.username,a=e.imageUrl,n=e.caption,c=e.postId,o=e.likes,i=e.user,l=e.ppId,d=Object(s.useState)(null),u=Object(r.a)(d,2),p=u[0],f=u[1],m=Object(s.useState)(!1),O=Object(r.a)(m,2),g=O[0],x=O[1],v=Object(s.useContext)(E),N=Object(r.a)(v,2),k=N[0],S=N[1],y=Object(s.useState)(""),w=Object(r.a)(y,2),C=w[0],I=w[1];return Object(s.useEffect)((function(){if(i){h.collection("users").doc(i.uid).get().then((function(e){f(e.data()),e.data().postIds.includes(c)?x(!1):x(!0)}));var e=0;h.collection("posts").where("uid","==",i.uid).get().then((function(t){t.forEach((function(t){e+=t.data().likes})),S(e)})),h.collection("users").doc(l).get().then((function(e){I(e.data().profilePicture)}))}}),[p,i]),Object(_.jsxs)("div",{className:j.a.Feed__posted,children:[Object(_.jsxs)("div",{className:j.a.Feed__post_head,children:[Object(_.jsx)(b.a,{alt:"profile",src:C}),Object(_.jsx)("p",{className:j.a.Feed__post_head_username,children:t}),Object(_.jsx)("p",{className:j.a.Feed__post_date,children:Object(_.jsx)("small",{children:"today"})})]}),Object(_.jsx)("p",{className:j.a.Feed__posted_caption,children:n}),Object(_.jsx)("img",{className:j.a.Feed__posted_picture,src:a,alt:"Posted pictures"}),Object(_.jsxs)("div",{className:j.a.Feed__posted_like_comment,children:[Object(_.jsxs)("span",{className:j.a.Feed__posted_likes,children:[Object(_.jsx)("button",{disabled:!i,onClick:function(){p.postIds.includes(c)?(h.collection("users").doc(i.uid).update("postIds",P.a.firestore.FieldValue.arrayRemove(c)),h.collection("posts").doc(c).update("likes",P.a.firestore.FieldValue.increment(-1)),console.log(k)):(h.collection("posts").doc(c).update("likes",P.a.firestore.FieldValue.increment(1)),h.collection("users").doc(i.uid).update("postIds",P.a.firestore.FieldValue.arrayUnion(c)),console.log("increment"))},children:Object(_.jsx)(F.a,{className:g||!i?j.a.Feed__posted_liked:j.a.Feed__posted_notLike})}),Object(_.jsx)("p",{children:Object(_.jsxs)("small",{children:[o,o>1?" likes":" like"," "]})})]}),Object(_.jsxs)("span",{className:j.a.Feed__posted_comment,children:[Object(_.jsx)("input",{placeholder:"Comment here..."}),Object(_.jsx)("button",{children:"Go!"})]})]})]})}),N=function(e){var t=e.username,a=e.user,n=e.userInfo,c=Object(s.useState)(""),o=Object(r.a)(c,2),l=o[0],d=o[1],u=Object(s.useState)(null),p=Object(r.a)(u,2),O=p[0],x=p[1],F=Object(s.useState)(0),P=Object(r.a)(F,2),N=P[0],k=P[1],S=Object(s.useState)([]),y=Object(r.a)(S,2),w=y[0],C=y[1];return Object(s.useEffect)((function(){h.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){C(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[a]),Object(_.jsxs)("div",{className:j.a.Feed__wrapper,children:[Object(_.jsxs)("div",{className:j.a.Feed__addPost,children:[Object(_.jsx)("progress",{className:j.a.Feed__progress,value:N,max:"100"}),Object(_.jsxs)("div",{className:j.a.Feed__caption_image,children:[Object(_.jsx)(b.a,{alt:"profile",src:a?n.profilePicture:i}),Object(_.jsx)("input",{type:"text",placeholder:"Caption here...",onChange:function(e){return d(e.target.value)}})]}),Object(_.jsxs)("div",{className:j.a.Feed__import_button,children:[Object(_.jsx)("input",{type:"file",id:"file-upload",onChange:function(e){e.target.files[0]&&x(e.target.files[0])}}),Object(_.jsx)(f.a,{className:j.a.Feed__postButton,onClick:function(){return a?null==O?alert("Please choose a meme you want to upload.."):void g.ref("images/".concat(O.name)).put(O).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);k(t)}),(function(e){console.log(e),alert(e.message)}),(function(){g.ref("images").child(O.name).getDownloadURL().then((function(e){h.collection("posts").add({timestamp:m.a.firestore.FieldValue.serverTimestamp(),caption:l,imageUrl:e,username:t,uid:a.uid,likes:0}),k(0),d(""),x(null)}))})):alert("Please Sign Up first")},children:"Post"})]})]}),w.map((function(e){var t=e.id,s=e.post;return Object(_.jsx)(v,{user:a,userInfo:n,postId:t,username:s.username,imageUrl:s.imageUrl,caption:s.caption,likes:s.likes,ppId:s.uid},t)}))]})},k=a(28),S=a.n(k),y=a(103),w=a(104),C=a(106);function I(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var U=Object(y.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #d55844",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},fields:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}})),E=Object(s.createContext)();var B=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(s.useState)(!1),i=Object(r.a)(o,2),l=i[0],d=i[1],p=U(),j=n.a.useState(I),b=Object(r.a)(j,1)[0],m=Object(s.useState)(""),x=Object(r.a)(m,2),F=x[0],P=x[1],v=Object(s.useState)(null),k=Object(r.a)(v,2),y=k[0],B=k[1],L=Object(s.useState)(""),A=Object(r.a)(L,2),G=A[0],H=A[1],M=Object(s.useState)(""),V=Object(r.a)(M,2),D=V[0],R=V[1],T=Object(s.useState)(""),z=Object(r.a)(T,2),J=z[0],W=z[1],q=Object(s.useState)(null),K=Object(r.a)(q,2),Z=K[0],Q=K[1],X=Object(s.useState)(null),Y=Object(r.a)(X,2),$=Y[0],ee=Y[1],te=Object(s.useState)(0),ae=Object(r.a)(te,2),se=ae[0],ne=ae[1];return Object(s.useEffect)((function(){var e=O.onAuthStateChanged((function(e){e?(h.collection("users").doc(e.uid).get().then((function(e){ee(e.data())})),Q(e)):(Q(null),ee(null),P(""),H(""),R(""),W(""))}));return function(){e()}}),[Z]),Object(_.jsxs)("div",{className:"App",children:[Object(_.jsxs)("div",{className:S.a.header,children:[Object(_.jsx)("p",{className:S.a.header__logo,children:"MEmer"}),Z?Object(_.jsx)(f.a,{className:S.a.header__button,onClick:function(){return O.signOut()},children:"Log Out"}):Object(_.jsx)(f.a,{className:S.a.header__button,onClick:function(){return c(!0)},children:"Log In"}),Object(_.jsx)(w.a,{open:a,onClose:function(){return c(!1)},children:Object(_.jsx)("div",{style:b,className:p.paper,children:Object(_.jsxs)("form",{className:p.fields,children:[Object(_.jsx)("center",{children:Object(_.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(_.jsx)(C.a,{placeholder:"Username",type:"text",value:F,onChange:function(e){return P(e.target.value)}}),Object(_.jsx)(C.a,{placeholder:"Email",type:"email",value:G,onChange:function(e){return H(e.target.value)}}),Object(_.jsx)(C.a,{placeholder:"Password",type:"password",value:D,onChange:function(e){return R(e.target.value)}}),Object(_.jsx)(C.a,{placeholder:"One line bio",type:"text",value:J,onChange:function(e){return W(e.target.value)}}),Object(_.jsxs)("div",{className:S.a.Profile_picture,children:[Object(_.jsx)("label",{children:"Set your profile pgiticture"}),Object(_.jsx)("input",{type:"file",id:"profile-upload",onChange:function(e){e.target.files[0]&&B(e.target.files[0])}})]}),Object(_.jsx)(f.a,{onClick:function(e){if(!y)return alert("Please upload your profile picture.");g.ref("profiles/".concat(y.name)).put(y).on("state_changed",(function(e){}),(function(e){console.log(e),alert(e.message)}),(function(){g.ref("profiles").child(y.name).getDownloadURL().then((function(e){O.createUserWithEmailAndPassword(G,D).then((function(t){return console.log("signup?"),h.collection("users").doc(t.user.uid).set({biography:J,displayName:F,profilePicture:e,postIds:[]})})).catch((function(e){return alert(e.message)})),B(null)}))}))},children:"Sign Up"}),Object(_.jsxs)("p",{style:{fontSize:"12px"},children:["Already have account?",Object(_.jsx)("button",{className:S.a.Header__sigin,onClick:function(){d(!0),c(!1)},children:"Sign in here"})]})]})})}),Object(_.jsx)(w.a,{open:l,onClose:function(){return d(!1)},children:Object(_.jsx)("div",{style:b,className:p.paper,children:Object(_.jsxs)("form",{className:p.fields,children:[Object(_.jsx)("center",{children:Object(_.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(_.jsx)(C.a,{placeholder:"Email",type:"email",value:G,onChange:function(e){return H(e.target.value)}}),Object(_.jsx)(C.a,{placeholder:"Password",type:"password",value:D,onChange:function(e){return R(e.target.value)}}),Object(_.jsx)(f.a,{onClick:function(e){e.preventDefault(),O.signInWithEmailAndPassword(G,D).then((function(){return d(!1)})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})})]}),Object(_.jsx)("div",{className:"App__body",children:Object(_.jsxs)(E.Provider,{value:[se,ne],children:[Object(_.jsx)(u,{userInfo:$||"",user:Z?O.currentUser:""}),Object(_.jsx)(N,{username:$?$.displayName:"",user:Z?O.currentUser:"",userInfo:$||""}),Object(_.jsx)("div",{className:"ads"})]})})]})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,109)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),c(e),o(e)}))};o.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(B,{})}),document.getElementById("root")),L()}},[[80,1,2]]]);
//# sourceMappingURL=main.f8c2b79e.chunk.js.map